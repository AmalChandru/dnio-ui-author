<svg>
    <g class="node-block" [ngStyle]="style" class="hover" [attr.data-id]="currNode._id">
        <g [class.active]="isSelected" [attr.data-id]="currNode._id">
            <rect x="0" y="0" width="140" height="36" rx="6" (click)="openProperties($event)"
                [attr.data-id]="currNode._id" />
            <text x="36" y="16" text-anchor="start" (click)="openProperties($event)"
                [attr.data-id]="currNode._id">{{nodeType}}</text>
            <text class="node-name" x="36" y="30" text-anchor="start" (click)="openProperties($event)"
                [attr.data-id]="currNode._id">{{currNode.name || currNode._id}}</text>
        </g>
        <rect *ngIf="index>0" class="node-anchor start" [class.active]="isActive('start')" [attr.data-id]="currNode._id"
            x="-6" y="12" width="12" height="12" rx="6" (click)="onAnchorClick($event)" />
        <rect class="node-anchor end" [class.active]="isActive('end')" [attr.data-id]="currNode._id" x="134" y="12"
            width="12" height="12" rx="6" (click)="onAnchorClick($event)" />
        <foreignObject width="18" height="18" x="10" y="9" [attr.data-id]="currNode._id">
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='API'"
                class="node-icon font-18 fw-500 dsi dsi-invoke-api" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='FILE'"
                class="node-icon font-18 fw-500 dsi dsi-file" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='TIMER'"
                class="node-icon font-18 fw-500 dsi dsi-clock" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='CODEBLOCK'"
                class="node-icon font-18 fw-500 dsi dsi-object text-muted" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='CONNECTOR'"
                class="node-icon font-18 fw-500 dsi dsi-connector" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='DATASERVICE'"
                class="node-icon font-18 fw-500 dsi dsi-data-service" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='FUNCTION'"
                class="node-icon font-18 fw-500 dsi dsi-function" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='MAPPING'"
                class="node-icon font-18 fw-500 dsi dsi-mapping" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='UNWIND'"
                class="node-icon font-18 fw-500 dsi dsi-expand" [attr.data-id]="currNode._id"></span>
            <span xmlns="http://www.w3.org/1999/xhtml" *ngIf="currNode.type=='RESPONSE'"
                class="node-icon font-18 fw-500 dsi dsi-response" [attr.data-id]="currNode._id"></span>
        </foreignObject>
        <!-- <g *ngIf="showDeleteNodeIcon" class="delete-node-icon">
            <rect [attr.data-id]="currNode._id" x="110" y="6" width="24" height="24" rx="6"
                style="fill:#fff;stroke-width:1px" />
            <foreignObject width="18" height="18" x="114" y="9" [attr.data-id]="currNode._id">
                <span xmlns="http://www.w3.org/1999/xhtml" class="node-icon font-14 fw-500 text-danger dsi dsi-trash"
                    [attr.data-id]="currNode._id"></span>
            </foreignObject>
        </g> -->
    </g>
    <g *ngFor="let p of paths;let i=index">
        <path [attr.d]="p.path" class="svg-path ignore-outside" [class.selected]="i == selectedPathIndex"
            (click)="selectPath($event,i,p)" odpClickOutside (outside)="selectedPathIndex=null" />
        <!-- <g *ngIf="i == selectedPathIndex">
            <rect class="delete-icon" [attr.data-id]="currNode._id" x="134" y="12" width="24" height="24" rx="6"
                (click)="deletePath()" />
            <foreignObject width="18" height="18" x="10" y="9" [attr.data-id]="currNode._id">
                <span xmlns="http://www.w3.org/1999/xhtml" class="node-icon font-18 fw-500 text-danger dsi dsi-trash"
                    [attr.data-id]="currNode._id"></span>
            </foreignObject>
        </g> -->
    </g>
</svg>