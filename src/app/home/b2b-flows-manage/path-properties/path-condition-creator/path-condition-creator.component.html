<div class="mt-3 w-100">
    <div class="header-item px-2 py-1 text-left d-flex align-items-center justify-content-between border rounded">
        <span class="text-secondary" *ngIf="!value">Configure</span>
        <div class="d-flex flex-wrap align-items-center">
            <span class="segments mr-1 fw-600 hover" [ngClass]="{
                'text-primary': selectedSegmentIndex==i,
                'font-18 text-secondary':selectedSegmentIndex!=i &&isLogicalOperator(item),
                'text-accent':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label!=item.value,
                'text-success':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label==item.value}"
                *ngFor="let item of segments;let i=index;let l=last">{{item.label}}</span>
        </div>
        <!-- <span class="text-dark" *ngIf="value">Re-Configure</span> -->
        <div class="d-flex align-items-center justify-content-end">
            <span *ngIf="value"
                class="icon dsi dsi-minus-circle text-danger hover d-flex align-items-center justify-content-center"
                (click)="unsetValue()"></span>
            <span class="icon dsi dsi-settings text-accent hover d-flex align-items-center justify-content-center"
                (click)="showConditionWindow=!showConditionWindow"></span>
        </div>
    </div>
</div>


<div *ngIf="showConditionWindow" class="condition-window p-4 bg-white position-fixed border-left">
    <div class="d-flex align-items-center justify-content-between mb-3">
        <h3 class="font-20 fw-600">Condition</h3>
        <span class="dsi dsi-close hover" (click)="cancel()"></span>
    </div>
    <div class="headers-list">
        <!-- <div class="d-flex flex-column">
            <div class="d-flex align-items-center">
                <code class="min-width font-20 fw-400 text-secondary">IF (</code>
                <div class="form-control d-flex align-items-center flex-wrap">
                    <span class="segments fw-600 hover"
                        [ngClass]="{
                            'text-primary': selectedSegmentIndex==i,
                            'ml-1':!l,
                            'font-18 text-secondary':selectedSegmentIndex!=i &&isLogicalOperator(item),
                            'text-accent':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label!=item.value,
                            'text-success':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label==item.value}"
                        (click)="selectSegment(i)"
                        *ngFor="let item of segments;let i=index;let l=last">{{item.label}}</span>
                    <input #typeAhead="ngbTypeahead" type="text" class="border-0" [(ngModel)]="tempValue"
                        [ngbTypeahead]="search" [resultFormatter]="formatter" [inputFormatter]="formatter"
                        (selectItem)="selectItem($event)" (keyup.enter)="createSegment($event)">
                </div>
                <code class="min-width font-20 fw-400 text-secondary">) {{"{"}}</code>
            </div>
            <code class="font-20 fw-400 ml-4 text-success my-2">//Execute Next</code>
            <div class="d-flex align-items-start">
                <code class="font-20 fw-400 text-secondary">{{"}"}} else {{"{"}}</code>
            </div>
            <div class="d-flex align-items-start">
                <code class="font-20 fw-400 ml-4 text-danger my-2">//Stop Here</code>
            </div>
            <div class="d-flex align-items-start">
                <code class="font-20 fw-400 text-secondary">{{"}"}}</code>
            </div>
        </div> -->

        <div class="form-control d-flex align-items-center flex-wrap">
            <span class="segments mr-1 fw-600 hover" [ngClass]="{
                    'text-primary': selectedSegmentIndex==i,
                    'font-18 text-secondary':selectedSegmentIndex!=i &&isLogicalOperator(item),
                    'text-accent':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label!=item.value,
                    'text-success':selectedSegmentIndex!=i && !isLogicalOperator(item) && item.label==item.value}"
                (click)="selectSegment(i)" *ngFor="let item of segments;let i=index;let l=last">{{item.label}}</span>
            <input #typeAhead="ngbTypeahead" type="text" class="border-0" [(ngModel)]="tempValue"
                [ngbTypeahead]="search" [resultFormatter]="formatter" [inputFormatter]="formatter"
                (selectItem)="selectItem($event)" (keyup.enter)="createSegment($event)">
        </div>

        <button type="button" class="btn btn-primary d-flex align-items-center mt-4 w-100 justify-content-center"
            (click)="save()">
            <span class="">Done</span>
        </button>
    </div>
</div>